/*
*   This file was generated by the ACPLT/OV C-Code Generator.
*
*   C-Code Generator version: 1.6.4
*   ACPLT/OV library version: 2.0.0
*   Date of file generation:  17-Dec-2015 (13:33:11)
*
*   DO NOT EDIT THIS FILE!
*/

#ifndef OV_COMPILE_LIBRARY_TCPbind
#define OV_COMPILE_LIBRARY_TCPbind
#endif

#include "TCPbind.h"

OV_DLLVAREXPORT OV_INSTPTR_ov_class pclass_TCPbind_TCPChannel = NULL;
OV_DLLVAREXPORT OV_INSTPTR_ov_class pclass_TCPbind_aresWorker = NULL;
OV_DLLVAREXPORT OV_INSTPTR_ov_class pclass_TCPbind_TCPListener = NULL;

OV_DLLVAREXPORT OV_INSTPTR_ov_association passoc_TCPbind_AssocSpecificClientHandler = NULL;

OV_VTBL_TCPbind_TCPChannel OV_VTABLE_TCPbind_TCPChannel = {
    ksbase_ComTask_constructor,
    ov_object_checkinit,
    ksbase_ComTask_destructor,
    TCPbind_TCPChannel_startup,
    TCPbind_TCPChannel_shutdown,
    ov_object_rename,
    ksbase_ComTask_getaccess,
    ov_object_getflags,
    ov_object_getcomment,
    ov_object_gettechunit,
    ov_object_getvar,
    ov_object_setvar,
    ksbase_ComTask_calcExec,
    TCPbind_TCPChannel_typemethod,
    TCPbind_TCPChannel_SendData,
    TCPbind_TCPChannel_OpenConnection,
    TCPbind_TCPChannel_OpenLocalConn,
    TCPbind_TCPChannel_CloseConnection,
    TCPbind_TCPChannel_AssociateClientHandler
};

OV_VTBL_TCPbind_aresWorker OV_VTABLE_TCPbind_aresWorker = {
    TCPbind_aresWorker_constructor,
    ov_object_checkinit,
    ksbase_ComTask_destructor,
    TCPbind_aresWorker_startup,
    TCPbind_aresWorker_shutdown,
    ov_object_rename,
    ksbase_ComTask_getaccess,
    ov_object_getflags,
    ov_object_getcomment,
    ov_object_gettechunit,
    ov_object_getvar,
    ov_object_setvar,
    ksbase_ComTask_calcExec,
    TCPbind_aresWorker_typemethod,
    TCPbind_aresWorker_insertGetAddrInfo,
    TCPbind_aresWorker_delGetAddrInfoElem
};

OV_VTBL_TCPbind_TCPListener OV_VTABLE_TCPbind_TCPListener = {
    TCPbind_TCPListener_constructor,
    ov_object_checkinit,
    ksbase_ComTask_destructor,
    ov_object_startup,
    TCPbind_TCPListener_shutdown,
    ov_object_rename,
    ksbase_ComTask_getaccess,
    ov_object_getflags,
    ov_object_getcomment,
    ov_object_gettechunit,
    ov_object_getvar,
    ov_object_setvar,
    ksbase_ComTask_calcExec,
    TCPbind_TCPListener_typemethod
};


OV_VARIABLE_DEF OV_VARIABLE_DEF_TCPbind_TCPChannel[] = {{
    &OV_VARIABLE_DEF_TCPbind_TCPChannel[1],
    "socket",
    1,
    3,
    16,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_INT),
    offsetof(OV_INST_TCPbind_TCPChannel, v_socket),
    0,
    (OV_STRING)NULL,
    "Socket to receive and send data (-1 is a non valid socket)",
    (OV_FNCPTR_GET)TCPbind_TCPChannel_socket_get,
    (OV_FNCPTR_SET)TCPbind_TCPChannel_socket_set
}, {
    (OV_VARIABLE_DEF*)0,
    "addrInfoReq",
    1,
    0,
    65,
    "pGetAddrInfoElem",
    (OV_STRING)NULL,
    1*sizeof(pGetAddrInfoElem),
    offsetof(OV_INST_TCPbind_TCPChannel, v_addrInfoReq),
    0,
    (OV_STRING)NULL,
    "Pointer to getAddrInfoElem structure",
    NULL,
    NULL
}};

OV_OPERATION_DEF OV_OPERATION_DEF_TCPbind_TCPChannel[] = {{
    &OV_OPERATION_DEF_TCPbind_TCPChannel[1],
    "SendData",
    0,
    "KSBASE_FNC_SENDDATA"
}, {
    &OV_OPERATION_DEF_TCPbind_TCPChannel[2],
    "startup",
    0,
    "OV_FNC_STARTUP"
}, {
    &OV_OPERATION_DEF_TCPbind_TCPChannel[3],
    "shutdown",
    0,
    "OV_FNC_SHUTDOWN"
}, {
    &OV_OPERATION_DEF_TCPbind_TCPChannel[4],
    "typemethod",
    0,
    "KSBASE_FNC_TYPEMETHOD"
}, {
    &OV_OPERATION_DEF_TCPbind_TCPChannel[5],
    "OpenLocalConn",
    0,
    "KSBASE_FNC_OPENLOCAL"
}, {
    &OV_OPERATION_DEF_TCPbind_TCPChannel[6],
    "OpenConnection",
    0,
    "KSBASE_FNC_OPENCONN"
}, {
    &OV_OPERATION_DEF_TCPbind_TCPChannel[7],
    "CloseConnection",
    0,
    "KSBASE_FNC_CLOSECONN"
}, {
    (OV_OPERATION_DEF*)0,
    "AssociateClientHandler",
    0,
    "TCPBIND_FNC_ASSOCIATECLIENTHANDLER"
}};

OV_CLASS_DEF OV_CLASS_DEF_TCPbind_TCPChannel = {
    &OV_CLASS_DEF_TCPbind_aresWorker,
    "TCPChannel",
    "ksbase/Channel",
    1,
    2097152,
    (OV_STRING)NULL,
    Ov_GetInstSize(TCPbind_TCPChannel),
    Ov_GetStaticInstSize(TCPbind_TCPChannel),
    (OV_POINTER)&OV_VTABLE_TCPbind_TCPChannel,
    &OV_VARIABLE_DEF_TCPbind_TCPChannel[0],
    (OV_PART_DEF*)0,
    &OV_OPERATION_DEF_TCPbind_TCPChannel[0]
};


OV_VARIABLE_DEF OV_VARIABLE_DEF_TCPbind_aresWorker[] = {{
    (OV_VARIABLE_DEF*)0,
    "threadHandle",
    1,
    0,
    65,
    "TCPB_THREADHANDLE",
    (OV_STRING)NULL,
    1*sizeof(TCPB_THREADHANDLE),
    offsetof(OV_INST_TCPbind_aresWorker, v_threadHandle),
    0,
    (OV_STRING)NULL,
    "Handle to getAddrInfoThread",
    NULL,
    NULL
}};

OV_OPERATION_DEF OV_OPERATION_DEF_TCPbind_aresWorker[] = {{
    &OV_OPERATION_DEF_TCPbind_aresWorker[1],
    "constructor",
    0,
    "OV_FNC_CONSTRUCTOR"
}, {
    &OV_OPERATION_DEF_TCPbind_aresWorker[2],
    "startup",
    0,
    "OV_FNC_STARTUP"
}, {
    &OV_OPERATION_DEF_TCPbind_aresWorker[3],
    "shutdown",
    0,
    "OV_FNC_SHUTDOWN"
}, {
    &OV_OPERATION_DEF_TCPbind_aresWorker[4],
    "typemethod",
    0,
    "KSBASE_FNC_TYPEMETHOD"
}, {
    &OV_OPERATION_DEF_TCPbind_aresWorker[5],
    "insertGetAddrInfo",
    0,
    "TCPBIND_ADDGETADDRINFO"
}, {
    (OV_OPERATION_DEF*)0,
    "delGetAddrInfoElem",
    0,
    "TCPBIND_DELGETADDRINFO"
}};

OV_CLASS_DEF OV_CLASS_DEF_TCPbind_aresWorker = {
    &OV_CLASS_DEF_TCPbind_TCPListener,
    "aresWorker",
    "ksbase/ComTask",
    1,
    2097152,
    (OV_STRING)NULL,
    Ov_GetInstSize(TCPbind_aresWorker),
    Ov_GetStaticInstSize(TCPbind_aresWorker),
    (OV_POINTER)&OV_VTABLE_TCPbind_aresWorker,
    &OV_VARIABLE_DEF_TCPbind_aresWorker[0],
    (OV_PART_DEF*)0,
    &OV_OPERATION_DEF_TCPbind_aresWorker[0]
};


OV_VARIABLE_DEF OV_VARIABLE_DEF_TCPbind_TCPListener[] = {{
    &OV_VARIABLE_DEF_TCPbind_TCPListener[1],
    "socket",
    2,
    0,
    144,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    2*sizeof(OV_INT),
    offsetof(OV_INST_TCPbind_TCPListener, v_socket),
    0,
    (OV_STRING)NULL,
    "listening on socket(s) (IPv4 and IPv6; (-1 is a non valid socket) ",
    NULL,
    NULL
}, {
    &OV_VARIABLE_DEF_TCPbind_TCPListener[2],
    "SocketState",
    1,
    0,
    17,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_UINT),
    offsetof(OV_INST_TCPbind_TCPListener, v_SocketState),
    0,
    (OV_STRING)NULL,
    "State of the socket: 0 - closed; 1 - opening; 2 - open; 4 - closing; 128 - indicates error; 255 generic error",
    NULL,
    NULL
}, {
    &OV_VARIABLE_DEF_TCPbind_TCPListener[3],
    "port",
    1,
    3,
    16,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_INT),
    offsetof(OV_INST_TCPbind_TCPListener, v_port),
    0,
    (OV_STRING)NULL,
    "port listening on",
    (OV_FNCPTR_GET)TCPbind_TCPListener_port_get,
    (OV_FNCPTR_SET)TCPbind_TCPListener_port_set
}, {
    (OV_VARIABLE_DEF*)0,
    "ChannelNeedsClientHandler",
    1,
    0,
    2,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_BOOL),
    offsetof(OV_INST_TCPbind_TCPListener, v_ChannelNeedsClientHandler),
    0,
    (OV_STRING)NULL,
    "TRUE: TCPChannels created by this TCPListener need ClientHandlers",
    NULL,
    NULL
}};

OV_OPERATION_DEF OV_OPERATION_DEF_TCPbind_TCPListener[] = {{
    &OV_OPERATION_DEF_TCPbind_TCPListener[1],
    "constructor",
    0,
    "OV_FNC_CONSTRUCTOR"
}, {
    &OV_OPERATION_DEF_TCPbind_TCPListener[2],
    "shutdown",
    0,
    "OV_FNC_SHUTDOWN"
}, {
    (OV_OPERATION_DEF*)0,
    "typemethod",
    0,
    "KSBASE_FNC_TYPEMETHOD"
}};

OV_CLASS_DEF OV_CLASS_DEF_TCPbind_TCPListener = {
    (OV_CLASS_DEF*)0,
    "TCPListener",
    "ksbase/ComTask",
    1,
    2097152,
    (OV_STRING)NULL,
    Ov_GetInstSize(TCPbind_TCPListener),
    Ov_GetStaticInstSize(TCPbind_TCPListener),
    (OV_POINTER)&OV_VTABLE_TCPbind_TCPListener,
    &OV_VARIABLE_DEF_TCPbind_TCPListener[0],
    (OV_PART_DEF*)0,
    &OV_OPERATION_DEF_TCPbind_TCPListener[0]
};

OV_ASSOCIATION_DEF OV_ASSOCIATION_DEF_TCPbind_AssocSpecificClientHandler = {
    (OV_ASSOCIATION_DEF*)0,
    "AssocSpecificClientHandler",
    3,
    0,
    "Identificator",
    "TCPbind/TCPListener",
    "Listener",
    "ksbase/ProtocolIdentificator",
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    0,
    0,
    0,
    0,
    (OV_FNCPTR_LINK)TCPbind_AssocSpecificClientHandler_link,
    (OV_FNCPTR_UNLINK)TCPbind_AssocSpecificClientHandler_unlink,
    (OV_FNCPTR_GETACCESS)TCPbind_AssocSpecificClientHandler_getaccess
};

OV_LIBRARY_DEF OV_LIBRARY_DEF_TCPbind = {
    "TCPbind",
    "V0.1 (17-01-2013)",
    "2.0.0",
    "Lars Evertz",
    "Lehrstuhl fï¿½r Prozessleittechnik 2013",
    "TCP binding for generic communications. Includes a TCPListener and a TCPChannel.",
    (OV_STRUCTURE_DEF*)0,
    &OV_CLASS_DEF_TCPbind_TCPChannel,
    &OV_ASSOCIATION_DEF_TCPbind_AssocSpecificClientHandler,
    ov_library_setglobalvars_TCPbind
};

#include "libov/ov_macros.h"

OV_RESULT ov_library_setglobalvars_TCPbind(void) {
    OV_INSTPTR_ov_library plib;
    OV_INSTPTR_ov_variable pvar;

    Ov_ForEachChildEx(ov_instantiation, pclass_ov_library, plib, ov_library) {
        if(!strcmp(plib->v_identifier, "TCPbind")) {
            pclass_TCPbind_TCPChannel = Ov_SearchChildEx(ov_containment, plib, "TCPChannel", ov_class);
            if(!pclass_TCPbind_TCPChannel) {
                return OV_ERR_GENERIC;
            }
            pvar = Ov_SearchChildEx(ov_containment, pclass_TCPbind_TCPChannel, "socket", ov_variable);
            pvar->v_initialvalue.value.vartype = OV_VT_INT;
            pvar->v_initialvalue.value.valueunion.val_int = -1 ;
            pclass_TCPbind_aresWorker = Ov_SearchChildEx(ov_containment, plib, "aresWorker", ov_class);
            if(!pclass_TCPbind_aresWorker) {
                return OV_ERR_GENERIC;
            }
            pclass_TCPbind_TCPListener = Ov_SearchChildEx(ov_containment, plib, "TCPListener", ov_class);
            if(!pclass_TCPbind_TCPListener) {
                return OV_ERR_GENERIC;
            }
            pvar = Ov_SearchChildEx(ov_containment, pclass_TCPbind_TCPListener, "SocketState", ov_variable);
            pvar->v_initialvalue.value.vartype = OV_VT_UINT;
            pvar->v_initialvalue.value.valueunion.val_uint = 0 ;
            pvar = Ov_SearchChildEx(ov_containment, pclass_TCPbind_TCPListener, "port", ov_variable);
            pvar->v_initialvalue.value.vartype = OV_VT_INT;
            pvar->v_initialvalue.value.valueunion.val_int = -1 ;
            pvar = Ov_SearchChildEx(ov_containment, pclass_TCPbind_TCPListener, "ChannelNeedsClientHandler", ov_variable);
            pvar->v_initialvalue.value.vartype = OV_VT_BOOL;
            pvar->v_initialvalue.value.valueunion.val_bool = 1 ;
            passoc_TCPbind_AssocSpecificClientHandler = Ov_SearchChildEx(ov_containment, plib, "AssocSpecificClientHandler", ov_association);
            if(!passoc_TCPbind_AssocSpecificClientHandler) {
                return OV_ERR_GENERIC;
            }
            return OV_ERR_OK;
        }
    }
    return OV_ERR_GENERIC;
}

OV_DLLFNCEXPORT OV_LIBRARY_DEF *ov_library_open_TCPbind(void) {
    return &OV_LIBRARY_DEF_TCPbind;
}

/*
*   End of file
*/
