/*
*   This file was generated by the ACPLT/OV C-Code Generator.
*
*   C-Code Generator version: 1.6.4
*   ACPLT/OV library version: 1.8.0
*   Date of file generation:  11-Jul-2011 (16:18:58)
*
*   DO NOT EDIT THIS FILE!
*/

#ifndef OV_COMPILE_LIBRARY_sfc
#define OV_COMPILE_LIBRARY_sfc
#endif

#include "sfc.h"

OV_DLLVAREXPORT OV_INSTPTR_ov_class pclass_sfc_sfcHeader = NULL;
OV_DLLVAREXPORT OV_INSTPTR_ov_class pclass_sfc_step = NULL;
OV_DLLVAREXPORT OV_INSTPTR_ov_class pclass_sfc_transition = NULL;

OV_DLLVAREXPORT OV_INSTPTR_ov_association passoc_sfc_nextTransitions = NULL;
OV_DLLVAREXPORT OV_INSTPTR_ov_association passoc_sfc_previousTransitions = NULL;

OV_VTBL_sfc_sfcHeader OV_VTABLE_sfc_sfcHeader = {
    sfc_sfcHeader_constructor,
    fb_functionblock_checkinit,
    fb_functionblock_destructor,
    fb_functionblock_startup,
    fb_functionblock_shutdown,
    fb_functionblock_getaccess,
    fb_functionblock_getflags,
    ov_object_getcomment,
    ov_object_gettechunit,
    fb_functionblock_getvar,
    fb_functionblock_setvar,
    fb_functionblock_execute,
    sfc_sfcHeader_typemethod
};

OV_VTBL_sfc_step OV_VTABLE_sfc_step = {
    sfc_step_constructor,
    fb_functionblock_checkinit,
    fb_functionblock_destructor,
    fb_functionblock_startup,
    fb_functionblock_shutdown,
    fb_functionblock_getaccess,
    fb_functionblock_getflags,
    ov_object_getcomment,
    ov_object_gettechunit,
    fb_functionblock_getvar,
    fb_functionblock_setvar,
    fb_functionblock_execute,
    sfc_step_typemethod
};

OV_VTBL_sfc_transition OV_VTABLE_sfc_transition = {
    sfc_transition_constructor,
    fb_functionblock_checkinit,
    fb_functionblock_destructor,
    fb_functionblock_startup,
    fb_functionblock_shutdown,
    fb_functionblock_getaccess,
    fb_functionblock_getflags,
    ov_object_getcomment,
    ov_object_gettechunit,
    fb_functionblock_getvar,
    fb_functionblock_setvar,
    fb_functionblock_execute,
    sfc_transition_typemethod
};

char OV_INITSTRING_DEF_sfc_sfcHeader_activeStep_1[] = "INIT";

OV_VARIABLE_DEF OV_VARIABLE_DEF_sfc_sfcHeader[] = {{
    &OV_VARIABLE_DEF_sfc_sfcHeader[1],
    "order",
    1,
    3,
    48,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_STRING),
    offsetof(OV_INST_sfc_sfcHeader, v_order),
    32768,
    (OV_STRING)NULL,
    "incoming command",
    (OV_FNCPTR_GET)sfc_sfcHeader_order_get,
    (OV_FNCPTR_SET)sfc_sfcHeader_order_set
}, {
    &OV_VARIABLE_DEF_sfc_sfcHeader[2],
    "activeStep",
    1,
    0,
    48,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_STRING),
    offsetof(OV_INST_sfc_sfcHeader, v_activeStep),
    16384,
    (OV_STRING)NULL,
    "active step",
    NULL,
    NULL
}, {
    &OV_VARIABLE_DEF_sfc_sfcHeader[3],
    "error",
    1,
    0,
    2,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_BOOL),
    offsetof(OV_INST_sfc_sfcHeader, v_error),
    16384,
    (OV_STRING)NULL,
    "error",
    NULL,
    NULL
}, {
    (OV_VARIABLE_DEF*)0,
    "errorDetail",
    1,
    0,
    48,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_STRING),
    offsetof(OV_INST_sfc_sfcHeader, v_errorDetail),
    16384,
    (OV_STRING)NULL,
    "error details",
    NULL,
    NULL
}};

OV_PART_DEF OV_PART_DEF_sfc_sfcHeader[] = {{
    &OV_PART_DEF_sfc_sfcHeader[1],
    "ACTs",
    "ov/domain",
     0,
    offsetof(OV_INST_sfc_sfcHeader, p_ACTs)
}, {
    (OV_PART_DEF*)0,
    "TCs",
    "ov/domain",
     0,
    offsetof(OV_INST_sfc_sfcHeader, p_TCs)
}};

OV_OPERATION_DEF OV_OPERATION_DEF_sfc_sfcHeader[] = {{
    &OV_OPERATION_DEF_sfc_sfcHeader[1],
    "constructor",
    0,
    "OV_FNC_CONSTRUCTOR"
}, {
    (OV_OPERATION_DEF*)0,
    "typemethod",
    0,
    "FB_FNC_TYPEMETHOD"
}};

OV_CLASS_DEF OV_CLASS_DEF_sfc_sfcHeader = {
    &OV_CLASS_DEF_sfc_step,
    "sfcHeader",
    "fc/functionChart",
    1,
    0,
    "SFC header",
    Ov_GetInstSize(sfc_sfcHeader),
    Ov_GetStaticInstSize(sfc_sfcHeader),
    (OV_POINTER)&OV_VTABLE_sfc_sfcHeader,
    &OV_VARIABLE_DEF_sfc_sfcHeader[0],
    &OV_PART_DEF_sfc_sfcHeader[0],
    &OV_OPERATION_DEF_sfc_sfcHeader[0]
};


OV_VARIABLE_DEF OV_VARIABLE_DEF_sfc_step[] = {{
    &OV_VARIABLE_DEF_sfc_step[1],
    "internalID",
    1,
    0,
    17,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_UINT),
    offsetof(OV_INST_sfc_step, v_internalID),
    8192,
    (OV_STRING)NULL,
    "internal ID",
    NULL,
    NULL
}, {
    &OV_VARIABLE_DEF_sfc_step[2],
    "X",
    1,
    0,
    2,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_BOOL),
    offsetof(OV_INST_sfc_step, v_X),
    16384,
    (OV_STRING)NULL,
    "step flag (active or inactive state of a step)",
    NULL,
    NULL
}, {
    &OV_VARIABLE_DEF_sfc_step[3],
    "T",
    1,
    0,
    50,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_TIME_SPAN),
    offsetof(OV_INST_sfc_step, v_T),
    16384,
    (OV_STRING)NULL,
    "elapsed time since initiation of a step",
    NULL,
    NULL
}, {
    &OV_VARIABLE_DEF_sfc_step[4],
    "evTransTrigger",
    1,
    0,
    2,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_BOOL),
    offsetof(OV_INST_sfc_step, v_evTransTrigger),
    16384,
    (OV_STRING)NULL,
    "Event: transition triggers",
    NULL,
    NULL
}, {
    &OV_VARIABLE_DEF_sfc_step[5],
    "error",
    1,
    0,
    2,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_BOOL),
    offsetof(OV_INST_sfc_step, v_error),
    16384,
    (OV_STRING)NULL,
    "error",
    NULL,
    NULL
}, {
    (OV_VARIABLE_DEF*)0,
    "errorDetail",
    1,
    0,
    48,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_STRING),
    offsetof(OV_INST_sfc_step, v_errorDetail),
    16384,
    (OV_STRING)NULL,
    "error details",
    NULL,
    NULL
}};

OV_PART_DEF OV_PART_DEF_sfc_step[] = {{
    &OV_PART_DEF_sfc_step[1],
    "entry",
    "fb/task",
     0,
    offsetof(OV_INST_sfc_step, p_entry)
}, {
    &OV_PART_DEF_sfc_step[2],
    "do",
    "fb/task",
     0,
    offsetof(OV_INST_sfc_step, p_do)
}, {
    &OV_PART_DEF_sfc_step[3],
    "trans",
    "fb/task",
     0,
    offsetof(OV_INST_sfc_step, p_trans)
}, {
    (OV_PART_DEF*)0,
    "exit",
    "fb/task",
     0,
    offsetof(OV_INST_sfc_step, p_exit)
}};

OV_OPERATION_DEF OV_OPERATION_DEF_sfc_step[] = {{
    &OV_OPERATION_DEF_sfc_step[1],
    "constructor",
    0,
    "OV_FNC_CONSTRUCTOR"
}, {
    (OV_OPERATION_DEF*)0,
    "typemethod",
    0,
    "FB_FNC_TYPEMETHOD"
}};

OV_CLASS_DEF OV_CLASS_DEF_sfc_step = {
    &OV_CLASS_DEF_sfc_transition,
    "step",
    "fb/functionblock",
    1,
    0,
    "SFC step",
    Ov_GetInstSize(sfc_step),
    Ov_GetStaticInstSize(sfc_step),
    (OV_POINTER)&OV_VTABLE_sfc_step,
    &OV_VARIABLE_DEF_sfc_step[0],
    &OV_PART_DEF_sfc_step[0],
    &OV_OPERATION_DEF_sfc_step[0]
};


OV_VARIABLE_DEF OV_VARIABLE_DEF_sfc_transition[] = {{
    &OV_VARIABLE_DEF_sfc_transition[1],
    "result",
    1,
    0,
    2,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_BOOL),
    offsetof(OV_INST_sfc_transition, v_result),
    256,
    (OV_STRING)NULL,
    "The result of the executed transition",
    NULL,
    NULL
}, {
    &OV_VARIABLE_DEF_sfc_transition[2],
    "error",
    1,
    0,
    2,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_BOOL),
    offsetof(OV_INST_sfc_transition, v_error),
    16384,
    (OV_STRING)NULL,
    "error",
    NULL,
    NULL
}, {
    (OV_VARIABLE_DEF*)0,
    "errorDetail",
    1,
    0,
    48,
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    1*sizeof(OV_STRING),
    offsetof(OV_INST_sfc_transition, v_errorDetail),
    16384,
    (OV_STRING)NULL,
    "error details",
    NULL,
    NULL
}};

OV_OPERATION_DEF OV_OPERATION_DEF_sfc_transition[] = {{
    &OV_OPERATION_DEF_sfc_transition[1],
    "constructor",
    0,
    "OV_FNC_CONSTRUCTOR"
}, {
    (OV_OPERATION_DEF*)0,
    "typemethod",
    0,
    "FB_FNC_TYPEMETHOD"
}};

OV_CLASS_DEF OV_CLASS_DEF_sfc_transition = {
    (OV_CLASS_DEF*)0,
    "transition",
    "fb/functionblock",
    1,
    0,
    "SFC transition",
    Ov_GetInstSize(sfc_transition),
    Ov_GetStaticInstSize(sfc_transition),
    (OV_POINTER)&OV_VTABLE_sfc_transition,
    &OV_VARIABLE_DEF_sfc_transition[0],
    (OV_PART_DEF*)0,
    &OV_OPERATION_DEF_sfc_transition[0]
};

OV_ASSOCIATION_DEF OV_ASSOCIATION_DEF_sfc_nextTransitions = {
    &OV_ASSOCIATION_DEF_sfc_previousTransitions,
    "nextTransitions",
    1,
    1,
    "nextTrans",
    "sfc/step",
    "prevStep",
    "sfc/transition",
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    0,
    0,
    0,
    0,
    (OV_FNCPTR_LINK)sfc_nextTransitions_link,
    (OV_FNCPTR_UNLINK)sfc_nextTransitions_unlink,
    (OV_FNCPTR_GETACCESS)sfc_nextTransitions_getaccess
};

OV_ASSOCIATION_DEF OV_ASSOCIATION_DEF_sfc_previousTransitions = {
    (OV_ASSOCIATION_DEF*)0,
    "previousTransitions",
    1,
    1,
    "prevTrans",
    "sfc/step",
    "nextStep",
    "sfc/transition",
    (OV_STRING)NULL,
    (OV_STRING)NULL,
    0,
    0,
    0,
    0,
    (OV_FNCPTR_LINK)sfc_previousTransitions_link,
    (OV_FNCPTR_UNLINK)sfc_previousTransitions_unlink,
    (OV_FNCPTR_GETACCESS)sfc_previousTransitions_getaccess
};

OV_LIBRARY_DEF OV_LIBRARY_DEF_sfc = {
    "sfc",
    "0.1",
    "1.8.0",
    "Liyong Yu",
    "2011 Lehrstuhl fuer Prozessleittechnik, RWTH Aachen",
    "ACPLT Sequntial Function Chart Library",
    (OV_STRUCTURE_DEF*)0,
    &OV_CLASS_DEF_sfc_sfcHeader,
    &OV_ASSOCIATION_DEF_sfc_nextTransitions,
    ov_library_setglobalvars_sfc
};

#include "libov/ov_macros.h"

OV_RESULT ov_library_setglobalvars_sfc(void) {
    OV_INSTPTR_ov_library plib;
    OV_INSTPTR_ov_variable pvar;

    Ov_ForEachChildEx(ov_instantiation, pclass_ov_library, plib, ov_library) {
        if(!strcmp(plib->v_identifier, "sfc")) {
            pclass_sfc_sfcHeader = Ov_SearchChildEx(ov_containment, plib, "sfcHeader", ov_class);
            if(!pclass_sfc_sfcHeader) {
                return OV_ERR_GENERIC;
            }
            pvar = Ov_SearchChildEx(ov_containment, pclass_sfc_sfcHeader, "activeStep", ov_variable);
            pvar->v_initialvalue.value.vartype = OV_VT_STRING;
            pvar->v_initialvalue.value.valueunion.val_string =  OV_INITSTRING_DEF_sfc_sfcHeader_activeStep_1 ;
            pclass_sfc_step = Ov_SearchChildEx(ov_containment, plib, "step", ov_class);
            if(!pclass_sfc_step) {
                return OV_ERR_GENERIC;
            }
            pclass_sfc_transition = Ov_SearchChildEx(ov_containment, plib, "transition", ov_class);
            if(!pclass_sfc_transition) {
                return OV_ERR_GENERIC;
            }
            passoc_sfc_nextTransitions = Ov_SearchChildEx(ov_containment, plib, "nextTransitions", ov_association);
            if(!passoc_sfc_nextTransitions) {
                return OV_ERR_GENERIC;
            }
            passoc_sfc_previousTransitions = Ov_SearchChildEx(ov_containment, plib, "previousTransitions", ov_association);
            if(!passoc_sfc_previousTransitions) {
                return OV_ERR_GENERIC;
            }
            return OV_ERR_OK;
        }
    }
    return OV_ERR_GENERIC;
}

OV_DLLFNCEXPORT OV_LIBRARY_DEF *ov_library_open_sfc(void) {
    return &OV_LIBRARY_DEF_sfc;
}

/*
*   End of file
*/
