
/******************************************************************************
*
*   FILE
*   ----
*   functionchart.c
*
*   History
*   -------
*   2011-06-10   File created
*
*******************************************************************************
*
*   This file is generated by the 'fb_builder' command
*
******************************************************************************/


#ifndef OV_COMPILE_LIBRARY_fb
#define OV_COMPILE_LIBRARY_fb
#endif


#include "fb.h"
#include "libov/ov_macros.h"
#include "ov_call_macros_10.h"


OV_DLLFNCEXPORT void
fb_functionchart_typemethod
(OV_INSTPTR_fb_functionblock pfb,	OV_TIME	* pltc)
{
  OV_INSTPTR_fb_functionchart pinst = Ov_StaticPtrCast(fb_functionchart, pfb);
  OV_INSTPTR_fb_task intask = &pinst->p_intask;
  OV_INSTPTR_fb_connection pcon;

  /* Trigger initial connections */

  Ov_ForEachChild (fb_initialconnections, pinst, pcon)
  {
    if (pcon->v_sourcetrig)
      Ov_Call0 (fb_connection, pcon, trigger);
  }

  /* Call preintask  */

  Ov_Call1 (fb_functionchart, pinst, preintask, pltc);

  /* Activate and execute internal task */

  intask->v_actimode = 1;
  intask->v_cyctime.secs = 0;
  intask->v_cyctime.usecs = 0;
  Ov_Call1 (fb_task, intask, execute, pltc);
  
  /* Call postintask  */

  Ov_Call1 (fb_functionchart, pinst, postintask, pltc);

  /* Trigger final connections */

  Ov_ForEachChild (fb_finalconnections, pinst, pcon)
  {
    if (!pcon->v_sourcetrig)
      Ov_Call0 (fb_connection, pcon, trigger);
  }

}

OV_DLLFNCEXPORT void
fb_functionchart_preintask
(OV_INSTPTR_fb_functionchart pfc, OV_TIME * pltc)
{
}

OV_DLLFNCEXPORT void
fb_functionchart_postintask
(OV_INSTPTR_fb_functionchart pfc, OV_TIME * pltc)
{
}
