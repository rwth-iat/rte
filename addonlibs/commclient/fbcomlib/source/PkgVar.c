
/******************************************************************************
*
*   FILE
*   ----
*   PkgVar.c
*
*   History
*   -------
*   2013-05-18   File created
*
*******************************************************************************
*
*   This file is generated by the 'acplt_builder' command
*
******************************************************************************/


#ifndef OV_COMPILE_LIBRARY_fbcomlib
#define OV_COMPILE_LIBRARY_fbcomlib
#endif


#include "fbcomlib.h"
#include "libov/ov_association.h"

#include "libov/ov_macros.h"

OV_DLLFNCEXPORT OV_RESULT fbcomlib_PkgVar_link(
		const OV_PPT_fbcomlib_PkgVar	pparent,
		const OV_CPT_fbcomlib_PkgVar	pchild,
		const OV_PLACEMENT_HINT	parenthint,
		const OV_CPT_fbcomlib_PkgVar	prelparent,
		const OV_PLACEMENT_HINT	childhint,
		const OV_CPT_fbcomlib_PkgVar	prelchild)
{
	/*	a Variable gets linke to a package (get/setVar) --> link the corresponding ksapi-objects	*/
	OV_RESULT result;

	if(Ov_CanCastTo(fbcomlib_getVar, pparent) && Ov_CanCastTo(fbcomlib_pkgGetVariable, pchild))
	{
		OV_INSTPTR_fbcomlib_getVar pGetVar = Ov_StaticPtrCast(fbcomlib_getVar, pparent);
		result = ov_association_link(passoc_ksapi_operationToVariable, Ov_PtrUpCast(ov_object, &(pGetVar->p_apiGet)),
					Ov_PtrUpCast(ov_object, &(pchild->p_apiVar)), parenthint, Ov_PtrUpCast(ov_object, prelparent),
					childhint, Ov_PtrUpCast(ov_object, prelchild));
		if(Ov_Fail(result))
			return result;

		return ov_association_link(passoc_fbcomlib_PkgVar, Ov_PtrUpCast(ov_object, pparent),
					Ov_PtrUpCast(ov_object, pchild), parenthint, Ov_PtrUpCast(ov_object, prelparent),
					childhint, Ov_PtrUpCast(ov_object, prelchild));
	}
	else if(Ov_CanCastTo(fbcomlib_setVar, pparent) && Ov_CanCastTo(fbcomlib_pkgSetVariable, pchild))
	{
		OV_INSTPTR_fbcomlib_setVar pSetVar = Ov_StaticPtrCast(fbcomlib_setVar, pparent);
		result = ov_association_link(passoc_ksapi_operationToVariable, Ov_PtrUpCast(ov_object, &(pSetVar->p_apiSet)),
				Ov_PtrUpCast(ov_object, &(pchild->p_apiVar)), parenthint, Ov_PtrUpCast(ov_object, prelparent),
				childhint, Ov_PtrUpCast(ov_object, prelchild));
		if(Ov_Fail(result))
			return result;

		return ov_association_link(passoc_fbcomlib_PkgVar, Ov_PtrUpCast(ov_object, pparent),
				Ov_PtrUpCast(ov_object, pchild), parenthint, Ov_PtrUpCast(ov_object, prelparent),
				childhint, Ov_PtrUpCast(ov_object, prelchild));
	}
	else
		return OV_ERR_BADTYPE;

}

OV_DLLFNCEXPORT void fbcomlib_PkgVar_unlink(
		const OV_PPT_fbcomlib_PkgVar	pparent,
		const OV_CPT_fbcomlib_PkgVar	pchild)
{
	if(Ov_CanCastTo(fbcomlib_getVar, pparent) && Ov_CanCastTo(fbcomlib_pkgGetVariable, pchild))
	{
		OV_INSTPTR_fbcomlib_getVar pGetVar = Ov_StaticPtrCast(fbcomlib_getVar, pparent);
		ov_association_unlink(passoc_ksapi_operationToVariable, Ov_PtrUpCast(ov_object, &(pGetVar->p_apiGet)),
				Ov_PtrUpCast(ov_object, &(pchild->p_apiVar)));
	}
	else if(Ov_CanCastTo(fbcomlib_setVar, pparent) && Ov_CanCastTo(fbcomlib_pkgSetVariable, pchild))
	{
		OV_INSTPTR_fbcomlib_setVar pSetVar = Ov_StaticPtrCast(fbcomlib_setVar, pparent);
		ov_association_unlink(passoc_ksapi_operationToVariable, Ov_PtrUpCast(ov_object, &(pSetVar->p_apiSet)),
				Ov_PtrUpCast(ov_object, &(pchild->p_apiVar)));
	}


	ov_association_unlink(passoc_fbcomlib_PkgVar, Ov_PtrUpCast(ov_object, pparent),
			Ov_PtrUpCast(ov_object, pchild));
	return;
}

OV_IMPL_GETACCESS(fbcomlib_PkgVar)


